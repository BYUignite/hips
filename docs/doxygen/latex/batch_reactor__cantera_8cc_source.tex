\hypertarget{batch_reactor__cantera_8cc_source}{}\doxysection{batch\+Reactor\+\_\+cantera.\+cc}
\label{batch_reactor__cantera_8cc_source}\index{/Users/maisy/hips-\/lib-\/final/hips/src/batchReactor\_cantera.cc@{/Users/maisy/hips-\/lib-\/final/hips/src/batchReactor\_cantera.cc}}
\mbox{\hyperlink{batch_reactor__cantera_8cc}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00001}00001 }
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00002}00002 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{batch_reactor__cantera_8h}{batchReactor\_cantera.h}}"{}}}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00005}00005 }
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00011}\mbox{\hyperlink{classbatch_reactor__cantera_a044cbcdcd2d011a24f2adebe8bfcfaa7}{00011}} \mbox{\hyperlink{classbatch_reactor__cantera_a044cbcdcd2d011a24f2adebe8bfcfaa7}{batchReactor\_cantera::batchReactor\_cantera}}(std::shared\_ptr<Cantera::Solution> cantSol) \{}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00012}00012     \mbox{\hyperlink{classbatch_reactor_a569251f4aa45e53dfd7584aa671a9771}{gas}} = cantSol-\/>thermo(); }
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00013}00013     \mbox{\hyperlink{classbatch_reactor_a44101d5defb4ba69474697744cbef158}{kin}} = cantSol-\/>kinetics(); }
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00014}00014 }
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00015}00015     \textcolor{comment}{// Get the number of species in the system}}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00016}00016     \mbox{\hyperlink{classbatch_reactor_a25a411dda898478f3c8ff2a5351906e5}{nvar}} = \mbox{\hyperlink{classbatch_reactor_a569251f4aa45e53dfd7584aa671a9771}{gas}}-\/>nSpecies();}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00017}00017 }
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00018}00018     \textcolor{comment}{// Initialize the integrator with CVODE}}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00019}00019     \mbox{\hyperlink{classbatch_reactor__cantera_a733f663675700952fa3b3df28fb03ac9}{integrator}}.reset(Cantera::newIntegrator(\textcolor{stringliteral}{"{}CVODE"{}})); \textcolor{comment}{// Use reset() instead of make\_unique}}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00020}00020     \mbox{\hyperlink{classbatch_reactor__cantera_a733f663675700952fa3b3df28fb03ac9}{integrator}}-\/>setTolerances(1E-\/4, 1E-\/10);       \textcolor{comment}{// Set tolerances for CVODE}}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00021}00021     \mbox{\hyperlink{classbatch_reactor__cantera_a733f663675700952fa3b3df28fb03ac9}{integrator}}-\/>setMaxSteps(5000);                 \textcolor{comment}{// Set maximum number of steps}}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00022}00022     \mbox{\hyperlink{classbatch_reactor__cantera_a733f663675700952fa3b3df28fb03ac9}{integrator}}-\/>initialize(0.0, *\textcolor{keyword}{this});            \textcolor{comment}{// Initialize the integrator}}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00023}00023 \}}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00024}00024 }
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00026}00026 }
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00032}\mbox{\hyperlink{classbatch_reactor__cantera_a8a28338d155ffe76452a04119112021f}{00032}} \textcolor{keywordtype}{void} \mbox{\hyperlink{classbatch_reactor__cantera_a8a28338d155ffe76452a04119112021f}{batchReactor\_cantera::react}}(\textcolor{keywordtype}{double} \&h, std::vector<double> \&y, \textcolor{keyword}{const} \textcolor{keywordtype}{double} tRun) \{}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00033}00033     \textcolor{comment}{// Set mass fractions and state}}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00034}00034     \mbox{\hyperlink{classbatch_reactor_a569251f4aa45e53dfd7584aa671a9771}{gas}}-\/>setMassFractions(\&y[0]);}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00035}00035     \mbox{\hyperlink{classbatch_reactor_a569251f4aa45e53dfd7584aa671a9771}{gas}}-\/>setState\_HP(h, \mbox{\hyperlink{classbatch_reactor_a569251f4aa45e53dfd7584aa671a9771}{gas}}-\/>pressure());}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00036}00036 }
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00037}00037     \textcolor{comment}{// Store fixed enthalpy and pressure}}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00038}00038     \mbox{\hyperlink{classbatch_reactor_a8d8d86a997c4e8424063f943ffab033a}{h\_fixed}} = h;}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00039}00039     \mbox{\hyperlink{classbatch_reactor_a486da1fa66d5cad76ca4614371dc335a}{P\_fixed}} = \mbox{\hyperlink{classbatch_reactor_a569251f4aa45e53dfd7584aa671a9771}{gas}}-\/>pressure();}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00040}00040 }
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00041}00041     \textcolor{comment}{// Reinitialize the integrator}}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00042}00042     \mbox{\hyperlink{classbatch_reactor__cantera_a733f663675700952fa3b3df28fb03ac9}{integrator}}-\/>reinitialize(0.0, *\textcolor{keyword}{this});}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00043}00043 }
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00044}00044     \textcolor{comment}{// Integrate over the given time}}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00045}00045     \mbox{\hyperlink{classbatch_reactor__cantera_a733f663675700952fa3b3df28fb03ac9}{integrator}}-\/>integrate(tRun);}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00046}00046 }
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00047}00047     \textcolor{comment}{// Get the solution and update species mass fractions}}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00048}00048     \textcolor{keywordtype}{double} *solution = \mbox{\hyperlink{classbatch_reactor__cantera_a733f663675700952fa3b3df28fb03ac9}{integrator}}-\/>solution();}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00049}00049     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} k = 0; k < \mbox{\hyperlink{classbatch_reactor_a25a411dda898478f3c8ff2a5351906e5}{nvar}}; k++)}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00050}00050         y[k] = solution[k];}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00051}00051 \}}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00052}00052 }
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00054}00054 }
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00061}\mbox{\hyperlink{classbatch_reactor__cantera_af9ad9234676eaf3f4f7a6d20a7de69c5}{00061}} \textcolor{keywordtype}{void} \mbox{\hyperlink{classbatch_reactor__cantera_af9ad9234676eaf3f4f7a6d20a7de69c5}{batchReactor\_cantera::eval}}(\textcolor{keywordtype}{double} t, \textcolor{keywordtype}{double} *vars, \textcolor{keywordtype}{double} *dvarsdt, \textcolor{keywordtype}{double} *not\_used) \{}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00062}00062     \textcolor{comment}{// Set mass fractions and state}}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00063}00063     \mbox{\hyperlink{classbatch_reactor_a569251f4aa45e53dfd7584aa671a9771}{gas}}-\/>setMassFractions\_NoNorm(vars);}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00064}00064     \mbox{\hyperlink{classbatch_reactor_a569251f4aa45e53dfd7584aa671a9771}{gas}}-\/>setState\_HP(\mbox{\hyperlink{classbatch_reactor_a8d8d86a997c4e8424063f943ffab033a}{h\_fixed}}, \mbox{\hyperlink{classbatch_reactor_a486da1fa66d5cad76ca4614371dc335a}{P\_fixed}});}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00065}00065 }
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00066}00066     \textcolor{comment}{// Calculate density and reaction rates}}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00067}00067     \textcolor{keywordtype}{double} \mbox{\hyperlink{classbatch_reactor_a38e600224710a61029e49eb91ab1480d}{rho}} = \mbox{\hyperlink{classbatch_reactor_a569251f4aa45e53dfd7584aa671a9771}{gas}}-\/>density();}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00068}00068     std::vector<double> rr(\mbox{\hyperlink{classbatch_reactor_a569251f4aa45e53dfd7584aa671a9771}{gas}}-\/>nSpecies());}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00069}00069     \mbox{\hyperlink{classbatch_reactor_a44101d5defb4ba69474697744cbef158}{kin}}-\/>getNetProductionRates(\&rr[0]);}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00070}00070     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} k = 0; k < \mbox{\hyperlink{classbatch_reactor_a569251f4aa45e53dfd7584aa671a9771}{gas}}-\/>nSpecies(); k++)}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00071}00071         dvarsdt[k] = rr[k] * \mbox{\hyperlink{classbatch_reactor_a569251f4aa45e53dfd7584aa671a9771}{gas}}-\/>molecularWeight(k) / \mbox{\hyperlink{classbatch_reactor_a38e600224710a61029e49eb91ab1480d}{rho}};}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00072}00072 \}}
\DoxyCodeLine{\Hypertarget{batch_reactor__cantera_8cc_source_l00073}00073 }

\end{DoxyCode}
